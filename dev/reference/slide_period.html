<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Slide relative to an index chunked by period — slide_period • slider</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Slide relative to an index chunked by period — slide_period" />
<meta property="og:description" content="slide_period() breaks up the .i-ndex by .period, and then uses that
to define the indices to slide over .x with.
It can be useful for, say, sliding over daily data in monthly chunks.
The underlying engine for breaking up .i is warp::warp_distance().
If you need more information about the .period types, that is the best
place to look." />


<meta name="robots" content="noindex">

<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">slider</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">0.1.5.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/slider.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/rowwise.html">Row-wise iteration with slider</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/DavisVaughan/slider/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Slide relative to an index chunked by period</h1>
    <small class="dont-index">Source: <a href='https://github.com/DavisVaughan/slider/blob/master/R/slide-period.R'><code>R/slide-period.R</code></a></small>
    <div class="hidden name"><code>slide_period.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>slide_period()</code> breaks up the <code>.i</code>-ndex by <code>.period</code>, and then uses that
to define the indices to slide over <code>.x</code> with.</p>
<p>It can be useful for, say, sliding over daily data in monthly chunks.</p>
<p>The underlying engine for breaking up <code>.i</code> is <code><a href='https://rdrr.io/pkg/warp/man/warp_distance.html'>warp::warp_distance()</a></code>.
If you need more information about the <code>.period</code> types, that is the best
place to look.</p>
    </div>

    <pre class="usage"><span class='fu'>slide_period</span>(
  <span class='no'>.x</span>,
  <span class='no'>.i</span>,
  <span class='no'>.period</span>,
  <span class='no'>.f</span>,
  <span class='no'>...</span>,
  <span class='kw'>.every</span> <span class='kw'>=</span> <span class='fl'>1L</span>,
  <span class='kw'>.origin</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>.before</span> <span class='kw'>=</span> <span class='fl'>0L</span>,
  <span class='kw'>.after</span> <span class='kw'>=</span> <span class='fl'>0L</span>,
  <span class='kw'>.complete</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>
)

<span class='fu'>slide_period_vec</span>(
  <span class='no'>.x</span>,
  <span class='no'>.i</span>,
  <span class='no'>.period</span>,
  <span class='no'>.f</span>,
  <span class='no'>...</span>,
  <span class='kw'>.every</span> <span class='kw'>=</span> <span class='fl'>1L</span>,
  <span class='kw'>.origin</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>.before</span> <span class='kw'>=</span> <span class='fl'>0L</span>,
  <span class='kw'>.after</span> <span class='kw'>=</span> <span class='fl'>0L</span>,
  <span class='kw'>.complete</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>.ptype</span> <span class='kw'>=</span> <span class='kw'>NULL</span>
)

<span class='fu'>slide_period_dbl</span>(
  <span class='no'>.x</span>,
  <span class='no'>.i</span>,
  <span class='no'>.period</span>,
  <span class='no'>.f</span>,
  <span class='no'>...</span>,
  <span class='kw'>.every</span> <span class='kw'>=</span> <span class='fl'>1L</span>,
  <span class='kw'>.origin</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>.before</span> <span class='kw'>=</span> <span class='fl'>0L</span>,
  <span class='kw'>.after</span> <span class='kw'>=</span> <span class='fl'>0L</span>,
  <span class='kw'>.complete</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>
)

<span class='fu'>slide_period_int</span>(
  <span class='no'>.x</span>,
  <span class='no'>.i</span>,
  <span class='no'>.period</span>,
  <span class='no'>.f</span>,
  <span class='no'>...</span>,
  <span class='kw'>.every</span> <span class='kw'>=</span> <span class='fl'>1L</span>,
  <span class='kw'>.origin</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>.before</span> <span class='kw'>=</span> <span class='fl'>0L</span>,
  <span class='kw'>.after</span> <span class='kw'>=</span> <span class='fl'>0L</span>,
  <span class='kw'>.complete</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>
)

<span class='fu'>slide_period_lgl</span>(
  <span class='no'>.x</span>,
  <span class='no'>.i</span>,
  <span class='no'>.period</span>,
  <span class='no'>.f</span>,
  <span class='no'>...</span>,
  <span class='kw'>.every</span> <span class='kw'>=</span> <span class='fl'>1L</span>,
  <span class='kw'>.origin</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>.before</span> <span class='kw'>=</span> <span class='fl'>0L</span>,
  <span class='kw'>.after</span> <span class='kw'>=</span> <span class='fl'>0L</span>,
  <span class='kw'>.complete</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>
)

<span class='fu'>slide_period_chr</span>(
  <span class='no'>.x</span>,
  <span class='no'>.i</span>,
  <span class='no'>.period</span>,
  <span class='no'>.f</span>,
  <span class='no'>...</span>,
  <span class='kw'>.every</span> <span class='kw'>=</span> <span class='fl'>1L</span>,
  <span class='kw'>.origin</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>.before</span> <span class='kw'>=</span> <span class='fl'>0L</span>,
  <span class='kw'>.after</span> <span class='kw'>=</span> <span class='fl'>0L</span>,
  <span class='kw'>.complete</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>
)

<span class='fu'>slide_period_dfr</span>(
  <span class='no'>.x</span>,
  <span class='no'>.i</span>,
  <span class='no'>.period</span>,
  <span class='no'>.f</span>,
  <span class='no'>...</span>,
  <span class='kw'>.every</span> <span class='kw'>=</span> <span class='fl'>1L</span>,
  <span class='kw'>.origin</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>.before</span> <span class='kw'>=</span> <span class='fl'>0L</span>,
  <span class='kw'>.after</span> <span class='kw'>=</span> <span class='fl'>0L</span>,
  <span class='kw'>.complete</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>.names_to</span> <span class='kw'>=</span> <span class='kw pkg'>rlang</span><span class='kw ns'>::</span><span class='fu'><a href='https://rlang.r-lib.org/reference/zap.html'>zap</a></span>(),
  <span class='kw'>.name_repair</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"unique"</span>, <span class='st'>"universal"</span>, <span class='st'>"check_unique"</span>)
)

<span class='fu'>slide_period_dfc</span>(
  <span class='no'>.x</span>,
  <span class='no'>.i</span>,
  <span class='no'>.period</span>,
  <span class='no'>.f</span>,
  <span class='no'>...</span>,
  <span class='kw'>.every</span> <span class='kw'>=</span> <span class='fl'>1L</span>,
  <span class='kw'>.origin</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>.before</span> <span class='kw'>=</span> <span class='fl'>0L</span>,
  <span class='kw'>.after</span> <span class='kw'>=</span> <span class='fl'>0L</span>,
  <span class='kw'>.complete</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>.size</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>.name_repair</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"unique"</span>, <span class='st'>"universal"</span>, <span class='st'>"check_unique"</span>, <span class='st'>"minimal"</span>)
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>.x</th>
      <td><p><code>[vector]</code></p>
<p>The vector to iterate over and apply <code>.f</code> to.</p></td>
    </tr>
    <tr>
      <th>.i</th>
      <td><p><code>[Date / POSIXct / POSIXlt]</code></p>
<p>A datetime index to break into periods.</p>
<p>There are 3 restrictions on the index:</p><ul>
<li><p>The size of the index must match the size of <code>.x</code>, they will not be
recycled to their common size.</p></li>
<li><p>The index must be an <em>increasing</em> vector, but duplicate values
are allowed.</p></li>
<li><p>The index cannot have missing values.</p></li>
</ul></td>
    </tr>
    <tr>
      <th>.period</th>
      <td><p><code>[character(1)]</code></p>
<p>A string defining the period to group by. Valid inputs can be roughly
broken into:</p><ul>
<li><p><code>"year"</code>, <code>"quarter"</code>, <code>"month"</code>, <code>"week"</code>, <code>"day"</code></p></li>
<li><p><code>"hour"</code>, <code>"minute"</code>, <code>"second"</code>, <code>"millisecond"</code></p></li>
<li><p><code>"yweek"</code>, <code>"mweek"</code></p></li>
<li><p><code>"yday"</code>, <code>"mday"</code></p></li>
</ul></td>
    </tr>
    <tr>
      <th>.f</th>
      <td><p><code>[function / formula]</code></p>
<p>If a <strong>function</strong>, it is used as is.</p>
<p>If a <strong>formula</strong>, e.g. <code>~ .x + 2</code>, it is converted to a function. There
are three ways to refer to the arguments:</p><ul>
<li><p>For a single argument function, use <code>.</code></p></li>
<li><p>For a two argument function, use <code>.x</code> and <code>.y</code></p></li>
<li><p>For more arguments, use <code>..1</code>, <code>..2</code>, <code>..3</code> etc</p></li>
</ul>

<p>This syntax allows you to create very compact anonymous functions.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Additional arguments passed on to the mapped function.</p></td>
    </tr>
    <tr>
      <th>.every</th>
      <td><p><code>[positive integer(1)]</code></p>
<p>The number of periods to group together.</p>
<p>For example, if the period was set to <code>"year"</code> with an every value of <code>2</code>,
then the years 1970 and 1971 would be placed in the same group.</p></td>
    </tr>
    <tr>
      <th>.origin</th>
      <td><p><code>[Date(1) / POSIXct(1) / POSIXlt(1) / NULL]</code></p>
<p>The reference date time value. The default when left as <code>NULL</code> is the
epoch time of <code>1970-01-01 00:00:00</code>, <em>in the time zone of the index</em>.</p>
<p>This is generally used to define the anchor time to count from, which is
relevant when the every value is <code>&gt; 1</code>.</p></td>
    </tr>
    <tr>
      <th>.before, .after</th>
      <td><p><code>[integer(1) / Inf]</code></p>
<p>The number of values before or after the current element to
include in the sliding window. Set to <code>Inf</code> to select all elements
before or after the current element. Negative values are allowed, which
allows you to "look forward" from the current element if used as the
<code>.before</code> value, or "look backwards" if used as <code>.after</code>.</p></td>
    </tr>
    <tr>
      <th>.complete</th>
      <td><p><code>[logical(1)]</code></p>
<p>Should <code>.f</code> be evaluated on complete windows only? If <code>FALSE</code>,
the default, then partial computations will be allowed.</p></td>
    </tr>
    <tr>
      <th>.ptype</th>
      <td><p><code>[vector(0) / NULL]</code></p>
<p>A prototype corresponding to the type of the output.</p>
<p>If <code>NULL</code>, the default, the output type is determined by computing the
common type across the results of the calls to <code>.f</code>.</p>
<p>If supplied, the result of each call to <code>.f</code> will be cast to that type,
and the final output will have that type.</p>
<p>If <code><a href='https://rdrr.io/r/base/options.html'>getOption("vctrs.no_guessing")</a></code> is <code>TRUE</code>, the <code>.ptype</code> must be
supplied. This is a way to make production code demand fixed types.</p></td>
    </tr>
    <tr>
      <th>.names_to</th>
      <td><p>This controls what to do with input names supplied in <code>...</code>.</p><ul>
<li><p>By default, input names are <a href='https://rlang.r-lib.org/reference/zap.html'>zapped</a>.</p></li>
<li><p>If a string, specifies a column where the input names will be
copied. These names are often useful to identify rows with
their original input. If a column name is supplied and <code>...</code> is
not named, an integer column is used instead.</p></li>
<li><p>If <code>NULL</code>, the input names are used as row names.</p></li>
</ul></td>
    </tr>
    <tr>
      <th>.name_repair</th>
      <td><p>One of <code>"unique"</code>, <code>"universal"</code>, or
<code>"check_unique"</code>. See <code><a href='https://vctrs.r-lib.org/reference/vec_as_names.html'>vec_as_names()</a></code> for the meaning of these
options.</p>
<p>With <code>vec_rbind()</code>, the repair function is applied to all inputs
separately. This is because <code>vec_rbind()</code> needs to align their
columns before binding the rows, and thus needs all inputs to
have unique names. On the other hand, <code>vec_cbind()</code> applies the
repair function after all inputs have been concatenated together
in a final data frame. Hence <code>vec_cbind()</code> allows the more
permissive minimal names repair.</p></td>
    </tr>
    <tr>
      <th>.size</th>
      <td><p>If, <code>NULL</code>, the default, will determine the number of
rows in <code>vec_cbind()</code> output by using the standard recycling rules.</p>
<p>Alternatively, specify the desired number of rows, and any inputs
of length 1 will be recycled appropriately.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A vector fulfilling the following invariants:</p>
<h3><code>slide_period()</code></h3>

<ul>
<li><p><code>vec_size(slide_period(.x)) == vec_size(unique(warp::warp_distance(.i)))</code></p></li>
<li><p><code>vec_ptype(slide_period(.x)) == list()</code></p></li>
</ul>



<h3><code>slide_period_vec()</code> and <code>slide_period_*()</code> variants</h3>

<ul>
<li><p><code>vec_size(slide_period_vec(.x)) == vec_size(unique(warp::warp_distance(.i)))</code></p></li>
<li><p><code>vec_size(slide_period_vec(.x)[[1]]) == 1L</code></p></li>
<li><p><code>vec_ptype(slide_period_vec(.x, .ptype = ptype)) == ptype</code></p></li>
</ul>



    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='block.html'>block()</a></code>, <code><a href='slide.html'>slide()</a></code>, <code><a href='slide_index.html'>slide_index()</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='no'>i</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/as.Date.html'>as.Date</a></span>(<span class='st'>"2019-01-28"</span>) + <span class='fl'>0</span>:<span class='fl'>5</span>

<span class='co'># Split `i` into 2-day periods to apply `.f` to</span>
<span class='fu'>slide_period</span>(<span class='no'>i</span>, <span class='no'>i</span>, <span class='st'>"day"</span>, <span class='no'>identity</span>, <span class='kw'>.every</span> <span class='kw'>=</span> <span class='fl'>2</span>)</div><div class='output co'>#&gt; [[1]]
#&gt; [1] "2019-01-28" "2019-01-29"
#&gt; 
#&gt; [[2]]
#&gt; [1] "2019-01-30" "2019-01-31"
#&gt; 
#&gt; [[3]]
#&gt; [1] "2019-02-01" "2019-02-02"
#&gt; </div><div class='input'>
<span class='co'># Or into 1-month periods</span>
<span class='fu'>slide_period</span>(<span class='no'>i</span>, <span class='no'>i</span>, <span class='st'>"month"</span>, <span class='no'>identity</span>)</div><div class='output co'>#&gt; [[1]]
#&gt; [1] "2019-01-28" "2019-01-29" "2019-01-30" "2019-01-31"
#&gt; 
#&gt; [[2]]
#&gt; [1] "2019-02-01" "2019-02-02"
#&gt; </div><div class='input'>
<span class='co'># Now select:</span>
<span class='co'># - The current 2-day period</span>
<span class='co'># - Plus 1 2-day period before the current one</span>
<span class='fu'>slide_period</span>(<span class='no'>i</span>, <span class='no'>i</span>, <span class='st'>"day"</span>, <span class='no'>identity</span>, <span class='kw'>.every</span> <span class='kw'>=</span> <span class='fl'>2</span>, <span class='kw'>.before</span> <span class='kw'>=</span> <span class='fl'>1</span>)</div><div class='output co'>#&gt; [[1]]
#&gt; [1] "2019-01-28" "2019-01-29"
#&gt; 
#&gt; [[2]]
#&gt; [1] "2019-01-28" "2019-01-29" "2019-01-30" "2019-01-31"
#&gt; 
#&gt; [[3]]
#&gt; [1] "2019-01-30" "2019-01-31" "2019-02-01" "2019-02-02"
#&gt; </div><div class='input'>
<span class='co'># Alter the `origin` to control the reference date for</span>
<span class='co'># how the 2-day groups are formed</span>
<span class='no'>origin</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/as.Date.html'>as.Date</a></span>(<span class='st'>"2019-01-29"</span>)
<span class='fu'>slide_period</span>(<span class='no'>i</span>, <span class='no'>i</span>, <span class='st'>"day"</span>, <span class='no'>identity</span>, <span class='kw'>.every</span> <span class='kw'>=</span> <span class='fl'>2</span>, <span class='kw'>.origin</span> <span class='kw'>=</span> <span class='no'>origin</span>)</div><div class='output co'>#&gt; [[1]]
#&gt; [1] "2019-01-28"
#&gt; 
#&gt; [[2]]
#&gt; [1] "2019-01-29" "2019-01-30"
#&gt; 
#&gt; [[3]]
#&gt; [1] "2019-01-31" "2019-02-01"
#&gt; 
#&gt; [[4]]
#&gt; [1] "2019-02-02"
#&gt; </div><div class='input'>
<span class='co'># This can be useful for, say, monthly averages</span>
<span class='no'>daily_sales</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>2</span>, <span class='fl'>5</span>, <span class='fl'>3</span>, <span class='fl'>6</span>, <span class='fl'>9</span>, <span class='fl'>4</span>)
<span class='fu'>slide_period_dbl</span>(<span class='no'>daily_sales</span>, <span class='no'>i</span>, <span class='st'>"month"</span>, <span class='no'>mean</span>)</div><div class='output co'>#&gt; [1] 4.0 6.5</div><div class='input'>
<span class='co'># If you need the index, slide over and return a data frame</span>
<span class='no'>sales_df</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span>(<span class='kw'>i</span> <span class='kw'>=</span> <span class='no'>i</span>, <span class='kw'>sales</span> <span class='kw'>=</span> <span class='no'>daily_sales</span>)

<span class='fu'>slide_period_dfr</span>(
  <span class='no'>sales_df</span>,
  <span class='no'>sales_df</span>$<span class='no'>i</span>,
  <span class='st'>"month"</span>,
  ~<span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span>(
     <span class='kw'>i</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/Extremes.html'>max</a></span>(<span class='no'>.x</span>$<span class='no'>i</span>),
     <span class='kw'>sales</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span>(<span class='no'>.x</span>$<span class='no'>sales</span>)
   )
)</div><div class='output co'>#&gt;            i sales
#&gt; 1 2019-01-31   4.0
#&gt; 2 2019-02-02   6.5</div><div class='input'>
<span class='co'># One of the most unique features about `slide_period()` is that it is</span>
<span class='co'># aware of how far apart elements of `.i` are in the `.period` you are</span>
<span class='co'># interested in. For example, if you do a monthly slide with `i2`, selecting</span>
<span class='co'># the current month and 1 month before it, then it will recognize that</span>
<span class='co'># `2019-02-01` and `2019-04-01` are not beside each other, and it won't</span>
<span class='co'># group them together.</span>
<span class='no'>i2</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/as.Date.html'>as.Date</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"2019-01-01"</span>, <span class='st'>"2019-02-01"</span>, <span class='st'>"2019-04-01"</span>, <span class='st'>"2019-05-01"</span>))

<span class='fu'>slide_period</span>(<span class='no'>i2</span>, <span class='no'>i2</span>, <span class='st'>"month"</span>, <span class='no'>identity</span>, <span class='kw'>.before</span> <span class='kw'>=</span> <span class='fl'>1</span>)</div><div class='output co'>#&gt; [[1]]
#&gt; [1] "2019-01-01"
#&gt; 
#&gt; [[2]]
#&gt; [1] "2019-01-01" "2019-02-01"
#&gt; 
#&gt; [[3]]
#&gt; [1] "2019-04-01"
#&gt; 
#&gt; [[4]]
#&gt; [1] "2019-04-01" "2019-05-01"
#&gt; </div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Davis Vaughan.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


