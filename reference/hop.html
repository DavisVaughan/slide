<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Hop — hop • slider</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Hop — hop" />
<meta property="og:description" content="hop() is the lower level engine that powers slide() (at least in theory).
It has slightly different invariants than slide(), and is useful
when you either need to hand craft boundary locations, or want to compute a
result with a size that is different from .x." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">slider</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/slider.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/rowwise.html">Row-wise iteration with slider</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/DavisVaughan/slider/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Hop</h1>
    <small class="dont-index">Source: <a href='https://github.com/DavisVaughan/slider/blob/master/R/hop.R'><code>R/hop.R</code></a></small>
    <div class="hidden name"><code>hop.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>hop()</code> is the lower level engine that powers <code><a href='slide.html'>slide()</a></code> (at least in theory).
It has slightly different invariants than <code><a href='slide.html'>slide()</a></code>, and is useful
when you either need to hand craft boundary locations, or want to compute a
result with a size that is different from <code>.x</code>.</p>
    </div>

    <pre class="usage"><span class='fu'>hop</span>(<span class='no'>.x</span>, <span class='no'>.starts</span>, <span class='no'>.stops</span>, <span class='no'>.f</span>, <span class='no'>...</span>)

<span class='fu'>hop_vec</span>(<span class='no'>.x</span>, <span class='no'>.starts</span>, <span class='no'>.stops</span>, <span class='no'>.f</span>, <span class='no'>...</span>, <span class='kw'>.ptype</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>.x</th>
      <td><p><code>[vector]</code></p>
<p>The vector to iterate over and apply <code>.f</code> to.</p></td>
    </tr>
    <tr>
      <th>.starts, .stops</th>
      <td><p><code>[integer]</code></p>
<p>Vectors of boundary locations that make up the windows to bucket <code>.x</code> with.
Both <code>.starts</code> and <code>.stops</code> will be recycled to their common size, and
that common size will be the size of the result. Both vectors should be
integer locations along <code>.x</code>, but out-of-bounds values are allowed.</p></td>
    </tr>
    <tr>
      <th>.f</th>
      <td><p><code>[function / formula]</code></p>
<p>If a <strong>function</strong>, it is used as is.</p>
<p>If a <strong>formula</strong>, e.g. <code>~ .x + 2</code>, it is converted to a function. There
are three ways to refer to the arguments:</p><ul>
<li><p>For a single argument function, use <code>.</code></p></li>
<li><p>For a two argument function, use <code>.x</code> and <code>.y</code></p></li>
<li><p>For more arguments, use <code>..1</code>, <code>..2</code>, <code>..3</code> etc</p></li>
</ul>

<p>This syntax allows you to create very compact anonymous functions.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Additional arguments passed on to the mapped function.</p></td>
    </tr>
    <tr>
      <th>.ptype</th>
      <td><p><code>[vector(0) / NULL]</code></p>
<p>A prototype corresponding to the type of the output.</p>
<p>If <code>NULL</code>, the default, the output type is determined by computing the
common type across the results of the calls to <code>.f</code>.</p>
<p>If supplied, the result of each call to <code>.f</code> will be cast to that type,
and the final output will have that type.</p>
<p>If <code><a href='https://rdrr.io/r/base/options.html'>getOption("vctrs.no_guessing")</a></code> is <code>TRUE</code>, the <code>.ptype</code> must be
supplied. This is a way to make production code demand fixed types.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A vector fulfilling the following invariants:</p>
<h3><code>hop()</code></h3>

<ul>
<li><p><code>vec_size(hop(.x, .starts, .stops)) == vec_size_common(.starts, .stops)</code></p></li>
<li><p><code>vec_ptype(hop(.x, .starts, .stops)) == list()</code></p></li>
</ul>



<h3><code>hop_vec()</code></h3>

<ul>
<li><p><code>vec_size(hop_vec(.x, .starts, .stops)) == vec_size_common(.starts, .stops)</code></p></li>
<li><p><code>vec_size(hop_vec(.x, .starts, .stops)[[1]]) == 1L</code></p></li>
<li><p><code>vec_ptype(hop_vec(.x, .starts, .stops, .ptype = ptype)) == ptype</code></p></li>
</ul>



    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><code>hop()</code> is very close to being a faster version of:</p><pre><span class='fu'>map2</span>(
  <span class='no'>.starts</span>,
  <span class='no'>.stops</span>,
  <span class='kw'>function</span>(<span class='no'>start</span>, <span class='no'>stop</span>) {
    <span class='no'>x_slice</span> <span class='kw'>&amp;</span><span class='no'>lt</span>;- <span class='fu'>vec_slice</span>(<span class='no'>.x</span>, <span class='no'>start</span>:<span class='no'>stop</span>)
    <span class='fu'>.f</span>(<span class='no'>x_slice</span>, <span class='no'>...</span>)
  }
)</pre>

<p>Because of this, <code><a href='hop_index.html'>hop_index()</a></code> is often the more useful function. <code>hop()</code>
mainly exists for API completeness.</p>
<p>The main difference is that the start and stop values make up ranges of
<em>possible</em> locations along <code>.x</code>, and it is not enforced that these locations
actually exist along <code>.x</code>. As an example, with <code>hop()</code> you can do the
following, which would be an error with <code>vec_slice()</code> because <code>0L</code> is
out of bounds.</p><pre><span class='fu'>hop</span>(<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"a"</span>, <span class='st'>"b"</span>), <span class='kw'>.starts</span> <span class='kw'>=</span> <span class='fl'>0L</span>, <span class='kw'>.stops</span> <span class='kw'>=</span> <span class='fl'>1L</span>, ~<span class='no'>.x</span>)
<span class='co'>#&amp;gt; [[1]]</span>
<span class='co'>#&amp;gt; [1] "a"</span></pre>

<p><code>hop()</code> allows these out of bounds values to be fully compatible with
<code><a href='slide.html'>slide()</a></code>. It is always possible to construct a <code>hop()</code> call from a <code><a href='slide.html'>slide()</a></code>
call. For example, the following are equivalent:</p><pre><span class='fu'><a href='slide.html'>slide</a></span>(<span class='fl'>1</span>:<span class='fl'>2</span>, ~<span class='no'>.x</span>, <span class='kw'>.before</span> <span class='kw'>=</span> <span class='fl'>1</span>)

<span class='fu'>hop</span>(<span class='fl'>1</span>:<span class='fl'>2</span>, <span class='kw'>.starts</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>0</span>, <span class='fl'>1</span>), <span class='kw'>.stops</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>1</span>, <span class='fl'>2</span>), ~<span class='no'>.x</span>)

<span class='co'>#&amp;gt; [[1]]</span>
<span class='co'>#&amp;gt; [1] 1</span>
<span class='co'>#&amp;gt;</span>
<span class='co'>#&amp;gt; [[2]]</span>
<span class='co'>#&amp;gt; [1] 1 2</span></pre>

    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='hop2.html'>hop2()</a></code>, <code><a href='hop_index.html'>hop_index()</a></code>, <code><a href='slide.html'>slide()</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># `hop()` let's you manually specify locations to apply `.f` at.</span>
<span class='fu'>hop</span>(<span class='fl'>1</span>:<span class='fl'>3</span>, <span class='kw'>.starts</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>1</span>, <span class='fl'>3</span>), <span class='kw'>.stops</span> <span class='kw'>=</span> <span class='fl'>3</span>, ~<span class='no'>.x</span>)</div><div class='output co'>#&gt; [[1]]
#&gt; [1] 1 2 3
#&gt; 
#&gt; [[2]]
#&gt; [1] 3
#&gt; </div><div class='input'>
<span class='co'># `hop()`'s start/stop locations are allowed to be out of bounds relative</span>
<span class='co'># to the size of `.x`.</span>
<span class='fu'>hop</span>(
  <span class='no'>mtcars</span>,
  <span class='kw'>.starts</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(-<span class='fl'>1</span>, <span class='fl'>3</span>),
  <span class='kw'>.stops</span>  <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>2</span>, <span class='fl'>6</span>),
  ~<span class='no'>.x</span>
)</div><div class='output co'>#&gt; [[1]]
#&gt;               mpg cyl disp  hp drat    wt  qsec vs am gear carb
#&gt; Mazda RX4      21   6  160 110  3.9 2.620 16.46  0  1    4    4
#&gt; Mazda RX4 Wag  21   6  160 110  3.9 2.875 17.02  0  1    4    4
#&gt; 
#&gt; [[2]]
#&gt;                    mpg cyl disp  hp drat    wt  qsec vs am gear carb
#&gt; Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1
#&gt; Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1
#&gt; Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2
#&gt; Valiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1
#&gt; </div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Davis Vaughan.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.9000.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


